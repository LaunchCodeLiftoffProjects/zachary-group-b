<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/">
<head>
   <th:block th:replace="fragments :: head"></th:block>
   <link rel="stylesheet" th:href="@{/css/shelf.css}" />
   <script defer th:src="@{/js/shelf.js}"></script>
</head>
<body>
<header>
   <nav th:replace="fragments :: navigation-user"></nav>
</header>

<!--form to manually add books to database-->
<div class="card mx-auto bg-dark card-shadow" style="width: 26rem; height: 22rem; margin-top:15rem;">
   <div class="card-body">
      <form method="post" class="row gy-2 gx-3 align-items-center">
         <div class="col-auto mt-3" style="width: 100%;">
            <label class="visually-hidden" th:for="title">Title</label>
            <div class="input-group">
               <div class="input-group-text">Title</div>
               <input th:field="${book.title}" type="text" class="form-control" id="title" placeholder="Dune" required>
            </div>
         </div>
         <div class="col-auto" style="width: 100%;">
            <label class="visually-hidden" th:for="author">Author</label>
            <div class="input-group">
               <div class="input-group-text">Author</div>
               <input th:field="${book.author}" type="text" class="form-control" id="author" placeholder="Frank Herbert" required>
            </div>
         </div>
         <div class="col-auto" style="width: 60%;">
            <label class="visually-hidden" th:for="isbn">ISBN</label>
            <div class="input-group">
               <div class="input-group-text">ISBN</div>
               <input th:field="${book.isbn}" type="text" class="form-control" id="isbn" placeholder="978-0441013593" required>
            </div>
         </div>
         <div class="col-auto" style="width: 40%;">
            <label class="visually-hidden" th:for="pages">Pages</label>
            <div class="input-group">
               <div class="input-group-text">Pages</div>
               <input th:field="${book.pages}" type="text" class="form-control" id="pages" placeholder="896" required>
            </div>
         </div>
         <div class="col-auto">
            <label class="visually-hidden" th:for="genre">Genre</label>
            <select th:field="*{book.genre}" class="form-select" id="genre" required>
               <option selected value="">Genre</option>
               <option value="Memoir">Memoir</option>
               <option value="Biography">Biography</option>
               <option value="Self-Help">Self-Help</option>
               <option value="Religion and Spirituality">Religion and Spirituality</option>
               <option value="Health and Fitness">Health and Fitness</option>
               <option value="Politics and Social Sciences">Politics and Social Sciences</option>
               <option value="Business and Money">Business and Money</option>
               <option value="Tech">Tech</option>
               <option value="Sci-Fi and Fantasy">Sci-Fi and Fantasy</option>
               <option value="Mystery, Thriller, and Suspense">Mystery, Thriller, and Suspense</option>
               <option value="Romance">Romance</option>
               <option value="Fiction (General)">Fiction (General)</option>
               <option value="Non-Fiction (Other)">Non-Fiction (Other)</option>
            </select>
         </div>
         <div class="col-auto">
            <label class="visually-hidden" th:for="status">Status</label>
            <select th:field="${book.status}" class="form-select status-selector" id="status" required>
               <option selected value="">Shelf</option>
               <option value="Want to Read">Want to Read</option>
               <option value="Currently Reading">Currently Reading</option>
               <option id="completed" value="Completed">Completed</option>
            </select>
         </div>
         <div>
            <div class="rating mt-2 mb-1" id="starRating"> <input th:field="${book.rating}" type="radio" name="rating" value="5" id="5"><label th:for="5">☆</label> <input type="radio" name="rating" value="4" id="4"><label th:for="4">☆</label> <input type="radio" name="rating" value="3" id="3"><label th:for="3">☆</label> <input type="radio" name="rating" value="2" id="2"><label th:for="2">☆</label> <input type="radio" name="rating" value="1" id="1"><label th:for="1">☆</label><input type="radio" name="rating" value="" checked="checked"></div>
         </div>
         <div class="col-auto mx-auto">
            <button type="submit" class="btn btn-primary btn-lg card-shadow">Add Book</button>
         </div>
      </form>
   </div>
</div>

<script type="text/javascript">
   let rating = document.getElementById("starRating");
   let selectStatus = document.querySelector('.status-selector');
   selectStatus.addEventListener('change', (event) => {
      if(`${event.target.value}` == 'Completed') {
         rating.style.visibility = 'visible';
      } else {
         rating.style.visibility = 'hidden';
      }
      console.log(`${event.target.value}`);
   });
   </script>
</body>
</html>